(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(14),i=n.n(r),o=n(3),u=n(15),a=n(4),s=n.n(a),l="/api/persons",d=function(){return s.a.get(l).then((function(e){return e.data}))},j=function(e){return s.a.post(l,e).then((function(e){return e.data}))},f=function(e){s.a.delete("".concat(l,"/").concat(e))},b=function(e){return s.a.put("".concat(l,"/").concat(e.id),e).then((function(e){return e.data}))},h=n(0),m=function(e){var t=e.persons,n=e.setPersons,r=e.setNotification,i=e.setNotificationStyle,a=Object(c.useState)(""),s=Object(o.a)(a,2),l=s[0],d=s[1],f=Object(c.useState)(""),m=Object(o.a)(f,2),O=m[0],v=m[1],p=function(e){e.preventDefault();var c={name:l,number:O};if(t.map((function(e){return e.name})).includes(l)){if(window.confirm("".concat(c.name," is already added to phonebook,  replace old number with a new one?"))){var o=t.filter((function(e){return e.name===c.name}))[0].id;b(Object(u.a)({id:o},c)).then((function(e){n(t.map((function(t){return t.id!==o?t:e}))),i("success"),r("Updated ".concat(l))})).catch((function(e){i("error"),r("Information of ".concat(l," has already been removed from the server"))})),d(""),v("")}}else j(c).then((function(e){n(t.concat(e))})),d(""),v(""),i("success"),r("Added ".concat(l));setTimeout((function(){r(null)}),5e3)};return Object(h.jsxs)("form",{onSubmit:p,children:[Object(h.jsxs)("div",{children:["name: ",Object(h.jsx)("input",{value:l,onChange:function(e){return d(e.target.value)}})]}),Object(h.jsxs)("div",{children:["number: ",Object(h.jsx)("input",{value:O,onChange:function(e){return v(e.target.value)}})]}),Object(h.jsx)("div",{children:Object(h.jsx)("button",{type:"submit",onSubmit:p,children:"add"})})]})},O=function(e){var t=e.newFilter,n=e.handleFilterChange;return Object(h.jsxs)("div",{children:["filter shown with: ",Object(h.jsx)("input",{value:t,onChange:n})]})},v=function(e){var t=e.removePerson,n=e.filteredPersons;return Object(h.jsx)("ul",{children:n.map((function(e){return Object(h.jsxs)("li",{children:[e.name," ",e.number," ",Object(h.jsx)("button",{onClick:function(){return t(e)},children:"delete"})]},e.name)}))})},p=function(e){var t=e.message,n=e.style;return null===t?null:Object(h.jsx)("div",{className:n,children:t})},x=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)("success"),u=Object(o.a)(i,2),a=u[0],s=u[1],l=Object(c.useState)([]),j=Object(o.a)(l,2),b=j[0],x=j[1],w=Object(c.useState)(""),g=Object(o.a)(w,2),S=g[0],y=g[1],C=b.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())||e.number.includes(S)}));return Object(c.useEffect)((function(){d().then((function(e){x(e)}))}),[]),Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Phonebook"}),Object(h.jsx)(p,{message:n,style:a}),Object(h.jsx)(O,{newFilter:S,handleFilterChange:function(e){return y(e.target.value)}}),Object(h.jsx)("h2",{children:"add new"}),Object(h.jsx)(m,{persons:b,setPersons:x,setNotification:r,setNotificationStyle:s}),Object(h.jsx)("h2",{children:"Numbers"}),Object(h.jsx)(v,{filteredPersons:C,removePerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&(f(e.id),x(b.filter((function(t){return t.id!==e.id}))),s("success"),r("".concat(e.name," removed")),setTimeout((function(){r(null)}),5e3))}})]})};n(39);i.a.render(Object(h.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.bade16aa.chunk.js.map